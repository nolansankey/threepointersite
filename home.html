<!DOCTYPE html>
<html>
  <head>
    <title>Three Pointer League</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Keywords used in the website -->
    <meta name="keywords" content="Three Pointer League, Three Pointer, Nolan Sankey">
    
    <!-- Description for Website -->
    <meta name="description" content="The official website for Three Pointer League">
    
    <!-- Bootstrap.css -->
    <link type="text/css" rel="stylesheet" href="assets/css/bootstrap.min.css">

    <!-- Custom styling -->
    <link type="text/css" rel="stylesheet" href="assets/css/style.css">
      
  </head>
    
  <!-- The #page-top ID is part of the scrolling feature - the data-spy and data-target are part of the built-in Bootstrap scrollspy function -->
  <body id="page-top" data-spy="scroll" data-target=".navbar fixed-top">
    <nav class="navbar navbar-fixed-top" role="navigation">
      <div class="header">
        <div class="header-text">
          <h1><strong>Three Pointer League</strong></h1>
        </div>
      </div>
      <div class="collapse navbar-collapse navbar-ex1-collapse">
        <ul class="nav navbar-nav">
          <li><a><strong>Home</strong></a></li>
          <li><a href="picks.html">Full Picks</a></li>
          <li><a href="stats.html">Statistics</a></li>
          <li><a href="earnings.html">Earnings</a></li>
          <li><a href="rules.html">Rules</a></li>
          <li><a href="history.html">History</a></li>
        </ul>
      </div>
      <div class="nav-button">
        <div class="user-info">
          <p id="user-note"></p>
        </div>
        <button onclick="logout()">Logout</button> 
      </div>
    </nav>

    <!-- Welcome Section -->
    <section id="welcome" class="welcome-section">
        <h1 id="user-intro"></h1>
    </section>
        
    <!-- Todays Picks Section -->
    <section id="todays-picks" class="todays-picks-section">
      <h1>Today's Questions</h1>
      <div id="yet-to-pick">
        <form method="POST" action="https://script.google.com/macros/s/AKfycbwYtM89FgVI9aL2qYE4d57mGlDzMdqYOeQ_SM_DFnz0UGGyTJ412yb-61ZAqwxhIS9q/exec" id="picks-form">
          
          <h3>QUESTION 1:</h3>
          <div class="question-box">
            <iframe class="question-embedded" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vTv2dMbpe5qmgTRDVUfu1Cm__klUpuEJKnTdSpfKTPQ8imjgbo4VfAU2R36vhNlXNKufpJrdYFHtva6/pubhtml?gid=1851289190&amp;single=true&amp;widget=true&amp;headers=false"></iframe>
          </div>
          <br>
          <input type="radio" id="q1_yes" name="Q1" value="yes">
          <label for="yes">YES</label><br>
          <input type="radio" id="q1_no" name="Q1" value="no">
          <label for="no">NO</label><br>
          <input type="radio" id="q1_opt-out" name="Q1" value="opt out">
          <label for="opt-out">OPT OUT</label><br><br>
              
          <h3>QUESTION 2:</h3>
          <div class="question-box">
            <iframe class="question-embedded" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vTv2dMbpe5qmgTRDVUfu1Cm__klUpuEJKnTdSpfKTPQ8imjgbo4VfAU2R36vhNlXNKufpJrdYFHtva6/pubhtml?gid=1940429751&amp;single=true&amp;widget=true&amp;headers=false"></iframe>
          </div>
          <br>
          <input type="radio" id="yes" name="Q2" value="yes">
          <label for="yes">YES</label><br>
          <input type="radio" id="no" name="Q2" value="no">
          <label for="no">NO</label><br>
          <input type="radio" id="opt-out" name="Q2" value="opt out">
          <label for="opt-out">OPT OUT</label><br><br>
          
          <h3>QUESTION 3:</h3>
          <div class="question-box">
            <iframe class="question-embedded" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vTv2dMbpe5qmgTRDVUfu1Cm__klUpuEJKnTdSpfKTPQ8imjgbo4VfAU2R36vhNlXNKufpJrdYFHtva6/pubhtml?gid=1168976608&amp;single=true&amp;widget=true&amp;headers=false"></iframe>
          </div>
          <br>
          <input type="radio" id="yes" name="Q3" value="yes">
          <label for="yes">YES</label><br>
          <input type="radio" id="no" name="Q3" value="no">
          <label for="no">NO</label><br>
          <input type="radio" id="opt-out" name="Q3" value="opt out">
          <label for="opt-out">OPT OUT</label><br><br>
          
          <input type="submit" value="Submit">
        </form>
      </div>
      <div id="already-picked">
        <h3>Your Submission</h3>
        <p id="completed_q1_pick"></p>
        <p id="completed_q2_pick"></p>
        <p id="completed_q3_pick"></p>
        <form method="POST" action="https://script.google.com/macros/s/AKfycbwYtM89FgVI9aL2qYE4d57mGlDzMdqYOeQ_SM_DFnz0UGGyTJ412yb-61ZAqwxhIS9q/exec" id="clear-form">
          <input type="submit" name="clear" value="Clear My Picks and Resubmit">
        </form>
      </div>
    </section>
      

    <!-- Scoreboard Section -->
    <section id="scores-section" class="scores-section">
      <h1>This Week's Scores</h1>
      <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vTv2dMbpe5qmgTRDVUfu1Cm__klUpuEJKnTdSpfKTPQ8imjgbo4VfAU2R36vhNlXNKufpJrdYFHtva6/pubhtml?gid=286867334&amp;single=true&amp;widget=true&amp;headers=false" scrolling="no"></iframe>
    </section>
         
  </body>
</html>

<script>
    var today = new Date();
    var dd = String(today.getDate()).padStart(2, '0');
    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
    var yyyy = today.getFullYear();
    today = mm + '/' + dd + '/' + yyyy;         
</script>

<script>
    var is_logged_in = localStorage.getItem("logged-in");
    var curr_user = localStorage.getItem("user");
    document.getElementById("user-note").innerHTML = curr_user;
    document.getElementById("user-intro").innerHTML = "Hi "+curr_user+"!";
    var q1_pick = localStorage.getItem("Q1 "+today);
    var q2_pick = localStorage.getItem("Q2 "+today);
    var q3_pick = localStorage.getItem("Q3 "+today);
    document.getElementById("completed_q1_pick").innerHTML = "QUESTION 1: "+q1_pick;
    document.getElementById("completed_q2_pick").innerHTML = "QUESTION 2: "+q2_pick;
    document.getElementById("completed_q3_pick").innerHTML = "QUESTION 3: "+q3_pick;
    if(!is_logged_in){
        window.location.replace("index.html");
    }
    function logout(){
        localStorage.clear();
        window.location.replace("index.html");
    }
</script>

<script>
    has_picked = localStorage.getItem("picked "+today);
    if(has_picked=="true") {
        document.getElementById('yet-to-pick').style.display = 'none'; 
        document.getElementById('already-picked').style.display = 'block'; 
    }
    else {
        document.getElementById('yet-to-pick').style.display = 'block'; 
        document.getElementById('already-picked').style.display = 'none'; 
    }
</script>

<script>
    window.addEventListener("load", function() {
        var p_form = document.getElementById('picks-form');
        p_form.addEventListener("submit", function(e) {
            e.preventDefault();
            const data = new FormData(p_form);
            var currentdate = new Date(); 
            var timestamp = Math.floor(new Date().getTime() / 1000);
            data.append("Name", curr_user);
            data.append("Timestamp", timestamp);
            q1_input = data.get("Q1");
            q2_input = data.get("Q2");
            q3_input = data.get("Q3");
            const action = e.target.action;
            fetch(action, {
                method: 'POST',
                body: data,
            })
            .then(() => {
                var r = confirm("Picks Submitted Successfully! Press OK to reload page");
                if (r == true){
                    localStorage.setItem("picked "+today, true);
                    localStorage.setItem("Q1 "+today, q1_input);
                    localStorage.setItem("Q2 "+today, q2_input);
                    localStorage.setItem("Q3 "+today, q3_input);
                    window.location.reload();
                }
            })
        });
    });
</script>

<script>
    window.addEventListener("load", function() {
        var clear_form = document.getElementById('clear-form');
        clear_form.addEventListener("submit", function(e) {
            e.preventDefault();
            const data = new FormData(clear_form);
            data.append("Name", curr_user);
            data.append("Clear", true);
            const action = e.target.action;
            fetch(action, {
                method: 'POST',
                body: data,
            })
            .then(() => {
                var r = confirm("Picks Cleared! Press OK to reload page and resubmit");
                if (r == true){
                    localStorage.setItem("picked "+today, false);
                    localStorage.setItem("Q1 "+today, null);
                    localStorage.setItem("Q2 "+today, null);
                    localStorage.setItem("Q3 "+today, null);
                    window.location.reload();
                }
            })
        });
    });
</script>


